<!DOCTYPE html>

<link rel="stylesheet" href="./css/normalize.css" />
<link rel="stylesheet" href="./css/bulma.css" />
<link rel="stylesheet" href="./css/prism.css" />
<link rel="stylesheet" href="./css/main.css" />

<div class="waa-slide has-background-primary is-family-secondary has-text-white">
  <div class="is-flex is-flex-direction-column waa-vh-100 p-3">
    <div class="waa-text-7">Hello Web Audio API 2</div>
    <div
      class="is-flex is-flex-direction-column is-justify-content-center waa-h-100"
    >
      <div class="waa-text-5">Oscillator</div>
      <div class="columns">
        <div class="column">
          <div class="waa-text-2">
            <pre
              class="language-js line-numbers"
            ><code>let osc = context.createOscillator();
    osc.connect(context.destination);
    osc.start(context.currentTime);
    osc.stop(context.currentTime + 2);</code></pre>
          </div>
          <div class="columns is-centered mt-1">
            <div class="waa-text-5 is-clickable" onclick="play1()">▶️</div>
          </div>

          <div class="waa-text-2">
            <pre
              class="language-js line-numbers"
            ><code>osc.type = "triangle";</code></pre>
          </div>
          <div class="columns is-centered mt-1">
            <div class="waa-text-5 is-clickable" onclick="play2()">▶️</div>
          </div>

          <div class="waa-text-2">
            <pre
              class="language-js line-numbers"
            ><code>osc.frequency.value = 880;</code></pre>
          </div>
          <div class="columns is-centered mt-1">
            <div class="waa-text-5 is-clickable" onclick="play3()">▶️</div>
          </div>

          <div class="waa-text-2">
            <pre
              class="language-js line-numbers"
            ><code>osc.frequency.setValueAtTime(500, context.currentTime + 1);</code></pre>
          </div>
          <div class="columns is-centered mt-1">
            <div class="waa-text-5 is-clickable" onclick="play4()">▶️</div>
          </div>
        </div>
        <div class="column is-flex is-flex-direction-column is-justify-content-space-around">
          <div class="block">
            <figure class="image">
              <img src="./images/oscillator.png" />
            </figure>  
          </div>
          <div class="block">
            <figure class="image">
              <img src="./images/oscillator-shapes.png" />
            </figure>
          </div>

          <div class="block">
            <figure class="image">
              <img src="./images/oscillator-freq.png" />
            </figure>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<script src="./js/prism.js"></script>
<script>
  Prism.plugins.customClass.map({ number: "pr-number" });
</script>

<script>
  let context;

  function init() {
    try {
      context = new AudioContext();
    } catch (e) {
      alert("Web Audio API is not supported");
    }
  }

  function createOsc(params) {
    const osc = context.createOscillator();
    osc.connect(context.destination);
    return osc;
  }

  function play1() {
    const osc = createOsc();
    osc.start(context.currentTime);
    osc.stop(context.currentTime + 2);
  }

  function play2() {
    const osc = createOsc();
    osc.type = "triangle";
    osc.start(context.currentTime);
    osc.stop(context.currentTime + 2);
  }

  function play3() {
    const osc = createOsc();
    osc.frequency.value = 880;
    osc.start(context.currentTime);
    osc.stop(context.currentTime + 2);
  }

  function play4() {
    const osc = createOsc();
    osc.frequency.setValueAtTime(500, context.currentTime + 1);
    osc.start(context.currentTime);
    osc.stop(context.currentTime + 2);
  }

  init();
</script>
