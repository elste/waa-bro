<!DOCTYPE html>

<link rel="stylesheet" href="./css/normalize.css" />
<link rel="stylesheet" href="./css/bulma.css" />
<link rel="stylesheet" href="./css/main.css" />
<script src="./js/waa-slide.js"></script>

<style>
  @keyframes blink {
    25% {
      opacity: 0.5;
    }
    50% {
      opacity: 0.1;
    }
    75% {
      opacity: 0.5;
    }
  }
  .blink {
    animation: blink 1s step-start 0s infinite;
  }
</style>

<div id="waa-container">
  <div class="waa-slide has-background-black">
    <div class="columns is-vcentered waa-vh-100">
      <div class="column">
        <div
          class="has-text-centered waa-text-15 is-clickable"
          onclick="toggle()"
        >
          <div id="disco">
            <div class="">🪩</div>
            <div class="music-off mt-6">🎧</div>
            <div class="music-on mt-6">🎶😎🎵</div>
            <div class="mt-6">🎤🎛️🎚️</div>
            <div class="music-off mt-6">😒😶😢😭😴</div>
            <div class="music-on mt-6">🙃🤩🥳😍😵‍💫</div>
            <div class="waa-text-5 music-off mt-6 has-text-grey">
              meglio controllare la console...
            </div>
          </div>
          <div class="waa-text-5 music-on mt-6 has-text-warning is-family-code">
            Benvenuti al MUG! SU LE MANIIII!!!
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<audio id="dj-play" src="./music/test.mp3" autoplay></audio>

<script>
  function showElements(play) {
    const elsOn = [...document.getElementsByClassName("music-on")];
    elsOn.forEach((el) => (el.style.display = play ? "block" : "none"));

    const elsOff = [...document.getElementsByClassName("music-off")];
    elsOff.forEach((el) => (el.style.display = play ? "none" : "block"));
  }

  function toggle() {
    const audioEl = document.getElementById("dj-play");
    if (audioEl.paused) {
      audioEl.play();
      showElements(true);
      document.getElementById("disco").classList.add("blink");
    } else {
      audioEl.pause();
      showElements(false);
      document.getElementById("disco").classList.remove("blink");
    }
  }

  showElements(false);
</script>
